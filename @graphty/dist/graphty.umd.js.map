{"version":3,"file":"graphty.umd.js","sources":["graphty.service.js","graphty.module.js"],"sourcesContent":["var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nimport { Injectable } from '@angular/core';\nvar GraphtyService = /** @class */ (function () {\n    function GraphtyService() {\n    }\n    /**\n     * Set the head of the query by setting name of the function and it's parameters.\n     *\n     * @param {string} funName\n     * @param {object} args\n     *\n     * @returns {string}\n     */\n    GraphtyService.prototype.setFuntion = function (funName, args) {\n        if (args === void 0) { args = null; }\n        var funArguments = funName, variables = [];\n        if (typeof args != 'object')\n            this.throError('Invalid argument! one of the arguments must be type of object');\n        if (args) {\n            for (var key in args) {\n                variables.push(key + ':' + (typeof (args[key]) == 'string' ? ('\"' + args[key] + '\"') : args[key]));\n            }\n            funArguments += '(' + variables.join(',') + ')';\n        }\n        return funArguments;\n    };\n    /**\n     * Set the body of the query by setting required keys as responded fields. It can be another function.\n     * as nested query.\n     *\n     * @param {Array<string>} funBody\n     *\n     * @returns {string}\n     **/\n    GraphtyService.prototype.setFunBody = function (funBody) {\n        if (!Array.isArray(funBody))\n            this.throError('body of the query should be type of array');\n        var gqlBody = [];\n        for (var key in funBody) {\n            if (typeof (funBody[key]) == 'string') {\n                gqlBody.push(funBody[key]);\n            }\n            else {\n                this.throError('Invalid parameter in body! the query body should be only type of string');\n            }\n        }\n        return gqlBody.join(',');\n    };\n    /**\n     * Set the body of the query by setting required keys as responded fields. It can be another function.\n     * as nested query.\n     *\n     * @param {Array<string>} funBody\n     *\n     * @returns {string}\n     **/\n    GraphtyService.prototype.combineQuery = function (combineQuery, typeOfQuery) {\n        if (combineQuery === void 0) { combineQuery = []; }\n        if (typeOfQuery === void 0) { typeOfQuery = null; }\n        var numOfMutations = 0, numOfQueries = 0, len = combineQuery.length;\n        for (var i = 0; i < len; i++) {\n            combineQuery[i].query.indexOf('mutation') > -1 ? numOfMutations++ : numOfQueries++;\n        }\n        if (typeOfQuery) {\n            if (len != numOfMutations)\n                this.throError('Invalid type of combined queries! Queries should have the same type as \"mutation\" since it is called from \"mutation\" method.');\n        }\n        else {\n            if (len != numOfQueries)\n                this.throError('Invalid type of combined queries! Queries should have the same type as \"root query\" since it is called from \"stagnation\" method.');\n        }\n        return ',' + combineQuery.map(function (q) { return q.query.slice(q.query.indexOf(\"{\") + 1, q.query.lastIndexOf(\"}\")); }).join(',');\n    };\n    /**\n     * Set the body of the query by setting required keys as responded fields. It can be another function.\n     * as nested query. The return query is type of root query and not mutation query.\n     *\n     * @param {Array<string>} funBody\n     *\n     * @returns {GqlQuery}\n     **/\n    GraphtyService.prototype.stagnation = function (graphStruct) {\n        var query = '{' +\n            this.setFuntion(graphStruct.fun.name, graphStruct.fun.args) + '{' +\n            this.setFunBody(graphStruct.ret) + '}' +\n            (graphStruct.combine ?\n                this.combineQuery(graphStruct.combine) : '') +\n            '}';\n        return { query: query };\n    };\n    /**\n     * Set the body of the query by setting required keys as responded fields. It can be another function.\n     * as nested query. The returned query is type of mutation query.\n     *\n     * @param {Array<string | any>} funBody\n     *\n     * @returns {GqlQuery}\n     **/\n    GraphtyService.prototype.mutation = function (graphStruct) {\n        var query = 'mutation{' +\n            this.setFuntion(graphStruct.fun.name, graphStruct.fun.args) + '{' +\n            this.setFunBody(graphStruct.ret) + '}' +\n            (graphStruct.combine ?\n                this.combineQuery(graphStruct.combine) : '') +\n            '}';\n        return { query: query };\n    };\n    /**\n     * Pop error if exists.\n     *\n     * @param {string} msg\n     *\n     * @returns {GqlQuery}\n     **/\n    GraphtyService.prototype.throError = function (msg) {\n        throw new Error(msg);\n    };\n    GraphtyService = __decorate([\n        Injectable(),\n        __metadata(\"design:paramtypes\", [])\n    ], GraphtyService);\n    return GraphtyService;\n}());\nexport { GraphtyService };\n//# sourceMappingURL=graphty.service.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { NgModule } from '@angular/core';\nimport { GraphtyService } from './graphty.service';\nvar GraphtyModule = /** @class */ (function () {\n    function GraphtyModule() {\n    }\n    GraphtyModule = __decorate([\n        NgModule({\n            providers: [GraphtyService]\n        })\n    ], GraphtyModule);\n    return GraphtyModule;\n}());\nexport { GraphtyModule };\n//# sourceMappingURL=graphty.module.js.map"],"names":["this","Injectable","__decorate","NgModule"],"mappings":"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"}